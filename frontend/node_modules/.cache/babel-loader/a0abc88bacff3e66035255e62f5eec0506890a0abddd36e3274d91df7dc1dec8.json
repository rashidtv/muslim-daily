{"ast":null,"code":"import Coordinates from './Coordinates';\nimport SolarTime from './SolarTime';\nimport { dateByAddingDays } from './DateUtils';\nexport const PolarCircleResolution = {\n  AqrabBalad: 'AqrabBalad',\n  AqrabYaum: 'AqrabYaum',\n  Unresolved: 'Unresolved'\n};\nconst LATITUDE_VARIATION_STEP = 0.5; // Degrees to add/remove at each resolution step\n\nconst UNSAFE_LATITUDE = 65; // Based on https://en.wikipedia.org/wiki/Midnight_sun\n\nconst isValidSolarTime = solarTime => !isNaN(solarTime.sunrise) && !isNaN(solarTime.sunset);\nconst aqrabYaumResolver = (coordinates, date, daysAdded = 1, direction = 1) => {\n  if (daysAdded > Math.ceil(365 / 2)) {\n    return null;\n  }\n  const testDate = new Date(date.getTime());\n  testDate.setDate(testDate.getDate() + direction * daysAdded);\n  const tomorrow = dateByAddingDays(testDate, 1);\n  const solarTime = new SolarTime(testDate, coordinates);\n  const tomorrowSolarTime = new SolarTime(tomorrow, coordinates);\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return aqrabYaumResolver(coordinates, date, daysAdded + (direction > 0 ? 0 : 1), -direction);\n  }\n  return {\n    date,\n    tomorrow,\n    coordinates,\n    solarTime,\n    tomorrowSolarTime\n  };\n};\nconst aqrabBaladResolver = (coordinates, date, latitude) => {\n  const solarTime = new SolarTime(date, {\n    ...coordinates,\n    latitude\n  });\n  const tomorrow = dateByAddingDays(date, 1);\n  const tomorrowSolarTime = new SolarTime(tomorrow, {\n    ...coordinates,\n    latitude\n  });\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return Math.abs(latitude) >= UNSAFE_LATITUDE ? aqrabBaladResolver(coordinates, date, latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP) : null;\n  }\n  return {\n    date,\n    tomorrow,\n    coordinates: new Coordinates(latitude, coordinates.longitude),\n    solarTime,\n    tomorrowSolarTime\n  };\n};\nexport const polarCircleResolvedValues = (resolver, date, coordinates) => {\n  const defaultReturn = {\n    date,\n    tomorrow: dateByAddingDays(date, 1),\n    coordinates,\n    solarTime: new SolarTime(date, coordinates),\n    tomorrowSolarTime: new SolarTime(dateByAddingDays(date, 1), coordinates)\n  };\n  switch (resolver) {\n    case PolarCircleResolution.AqrabYaum:\n      {\n        return aqrabYaumResolver(coordinates, date) || defaultReturn;\n      }\n    case PolarCircleResolution.AqrabBalad:\n      {\n        const {\n          latitude\n        } = coordinates;\n        return aqrabBaladResolver(coordinates, date, latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP) || defaultReturn;\n      }\n    default:\n      {\n        return defaultReturn;\n      }\n  }\n};","map":{"version":3,"names":["Coordinates","SolarTime","dateByAddingDays","PolarCircleResolution","AqrabBalad","AqrabYaum","Unresolved","LATITUDE_VARIATION_STEP","UNSAFE_LATITUDE","isValidSolarTime","solarTime","isNaN","sunrise","sunset","aqrabYaumResolver","coordinates","date","daysAdded","direction","Math","ceil","testDate","Date","getTime","setDate","getDate","tomorrow","tomorrowSolarTime","aqrabBaladResolver","latitude","abs","sign","longitude","polarCircleResolvedValues","resolver","defaultReturn"],"sources":["C:\\Users\\Rashid\\muslim-daily\\frontend\\node_modules\\adhan\\src\\PolarCircleResolution.ts"],"sourcesContent":["import Coordinates from './Coordinates';\nimport SolarTime from './SolarTime';\nimport { dateByAddingDays } from './DateUtils';\nimport { ValueOf } from './TypeUtils';\n\nexport const PolarCircleResolution = {\n  AqrabBalad: 'AqrabBalad',\n  AqrabYaum: 'AqrabYaum',\n  Unresolved: 'Unresolved',\n} as const;\n\nconst LATITUDE_VARIATION_STEP = 0.5; // Degrees to add/remove at each resolution step\nconst UNSAFE_LATITUDE = 65; // Based on https://en.wikipedia.org/wiki/Midnight_sun\n\nconst isValidSolarTime = (solarTime: SolarTime) =>\n  !isNaN(solarTime.sunrise) && !isNaN(solarTime.sunset);\n\nconst aqrabYaumResolver = (\n  coordinates: Coordinates,\n  date: Date,\n  daysAdded = 1,\n  direction = 1,\n): {\n  date: Date;\n  tomorrow: Date;\n  coordinates: Coordinates;\n  solarTime: SolarTime;\n  tomorrowSolarTime: SolarTime;\n} | null => {\n  if (daysAdded > Math.ceil(365 / 2)) {\n    return null;\n  }\n  const testDate = new Date(date.getTime());\n  testDate.setDate(testDate.getDate() + direction * daysAdded);\n  const tomorrow = dateByAddingDays(testDate, 1);\n  const solarTime = new SolarTime(testDate, coordinates);\n  const tomorrowSolarTime = new SolarTime(tomorrow, coordinates);\n\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return aqrabYaumResolver(\n      coordinates,\n      date,\n      daysAdded + (direction > 0 ? 0 : 1),\n      -direction,\n    );\n  }\n\n  return {\n    date,\n    tomorrow,\n    coordinates,\n    solarTime,\n    tomorrowSolarTime,\n  };\n};\n\nconst aqrabBaladResolver = (\n  coordinates: Coordinates,\n  date: Date,\n  latitude: number,\n): {\n  date: Date;\n  tomorrow: Date;\n  coordinates: Coordinates;\n  solarTime: SolarTime;\n  tomorrowSolarTime: SolarTime;\n} | null => {\n  const solarTime = new SolarTime(date, { ...coordinates, latitude });\n  const tomorrow = dateByAddingDays(date, 1);\n  const tomorrowSolarTime = new SolarTime(tomorrow, {\n    ...coordinates,\n    latitude,\n  });\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return Math.abs(latitude) >= UNSAFE_LATITUDE\n      ? aqrabBaladResolver(\n          coordinates,\n          date,\n          latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP,\n        )\n      : null;\n  }\n\n  return {\n    date,\n    tomorrow,\n    coordinates: new Coordinates(latitude, coordinates.longitude),\n    solarTime,\n    tomorrowSolarTime,\n  };\n};\n\nexport const polarCircleResolvedValues = (\n  resolver: ValueOf<typeof PolarCircleResolution>,\n  date: Date,\n  coordinates: Coordinates,\n) => {\n  const defaultReturn = {\n    date,\n    tomorrow: dateByAddingDays(date, 1),\n    coordinates,\n    solarTime: new SolarTime(date, coordinates),\n    tomorrowSolarTime: new SolarTime(dateByAddingDays(date, 1), coordinates),\n  };\n\n  switch (resolver) {\n    case PolarCircleResolution.AqrabYaum: {\n      return aqrabYaumResolver(coordinates, date) || defaultReturn;\n    }\n    case PolarCircleResolution.AqrabBalad: {\n      const { latitude } = coordinates;\n      return (\n        aqrabBaladResolver(\n          coordinates,\n          date,\n          latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP,\n        ) || defaultReturn\n      );\n    }\n    default: {\n      return defaultReturn;\n    }\n  }\n};\n"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,gBAAT,QAAiC,aAAjC;AAGA,OAAO,MAAMC,qBAAqB,GAAG;EACnCC,UAAU,EAAE,YADuB;EAEnCC,SAAS,EAAE,WAFwB;EAGnCC,UAAU,EAAE;AAHuB,CAA9B;AAMP,MAAMC,uBAAuB,GAAG,GAAhC,C,CAAqC;;AACrC,MAAMC,eAAe,GAAG,EAAxB,C,CAA4B;;AAE5B,MAAMC,gBAAgB,GAAIC,SAAD,IACvB,CAACC,KAAK,CAACD,SAAS,CAACE,OAAX,CAAN,IAA6B,CAACD,KAAK,CAACD,SAAS,CAACG,MAAX,CADrC;AAGA,MAAMC,iBAAiB,GAAGA,CACxBC,WADwB,EAExBC,IAFwB,EAGxBC,SAAS,GAAG,CAHY,EAIxBC,SAAS,GAAG,CAJY,KAWd;EACV,IAAID,SAAS,GAAGE,IAAI,CAACC,IAAL,CAAU,MAAM,CAAhB,CAAhB,EAAoC;IAClC,OAAO,IAAP;EACD;EACD,MAAMC,QAAQ,GAAG,IAAIC,IAAJ,CAASN,IAAI,CAACO,OAAL,EAAT,CAAjB;EACAF,QAAQ,CAACG,OAAT,CAAiBH,QAAQ,CAACI,OAAT,KAAqBP,SAAS,GAAGD,SAAlD;EACA,MAAMS,QAAQ,GAAGxB,gBAAgB,CAACmB,QAAD,EAAW,CAAX,CAAjC;EACA,MAAMX,SAAS,GAAG,IAAIT,SAAJ,CAAcoB,QAAd,EAAwBN,WAAxB,CAAlB;EACA,MAAMY,iBAAiB,GAAG,IAAI1B,SAAJ,CAAcyB,QAAd,EAAwBX,WAAxB,CAA1B;EAEA,IAAI,CAACN,gBAAgB,CAACC,SAAD,CAAjB,IAAgC,CAACD,gBAAgB,CAACkB,iBAAD,CAArD,EAA0E;IACxE,OAAOb,iBAAiB,CACtBC,WADsB,EAEtBC,IAFsB,EAGtBC,SAAS,IAAIC,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,CAAxB,CAHa,EAItB,CAACA,SAJqB,CAAxB;EAMD;EAED,OAAO;IACLF,IADK;IAELU,QAFK;IAGLX,WAHK;IAILL,SAJK;IAKLiB;EALK,CAAP;AAOD,CArCD;AAuCA,MAAMC,kBAAkB,GAAGA,CACzBb,WADyB,EAEzBC,IAFyB,EAGzBa,QAHyB,KAUf;EACV,MAAMnB,SAAS,GAAG,IAAIT,SAAJ,CAAce,IAAd,EAAoB;IAAE,GAAGD,WAAL;IAAkBc;EAAlB,CAApB,CAAlB;EACA,MAAMH,QAAQ,GAAGxB,gBAAgB,CAACc,IAAD,EAAO,CAAP,CAAjC;EACA,MAAMW,iBAAiB,GAAG,IAAI1B,SAAJ,CAAcyB,QAAd,EAAwB;IAChD,GAAGX,WAD6C;IAEhDc;EAFgD,CAAxB,CAA1B;EAIA,IAAI,CAACpB,gBAAgB,CAACC,SAAD,CAAjB,IAAgC,CAACD,gBAAgB,CAACkB,iBAAD,CAArD,EAA0E;IACxE,OAAOR,IAAI,CAACW,GAAL,CAASD,QAAT,KAAsBrB,eAAtB,GACHoB,kBAAkB,CAChBb,WADgB,EAEhBC,IAFgB,EAGhBa,QAAQ,GAAGV,IAAI,CAACY,IAAL,CAAUF,QAAV,IAAsBtB,uBAHjB,CADf,GAMH,IANJ;EAOD;EAED,OAAO;IACLS,IADK;IAELU,QAFK;IAGLX,WAAW,EAAE,IAAIf,WAAJ,CAAgB6B,QAAhB,EAA0Bd,WAAW,CAACiB,SAAtC,CAHR;IAILtB,SAJK;IAKLiB;EALK,CAAP;AAOD,CAlCD;AAoCA,OAAO,MAAMM,yBAAyB,GAAGA,CACvCC,QADuC,EAEvClB,IAFuC,EAGvCD,WAHuC,KAIpC;EACH,MAAMoB,aAAa,GAAG;IACpBnB,IADoB;IAEpBU,QAAQ,EAAExB,gBAAgB,CAACc,IAAD,EAAO,CAAP,CAFN;IAGpBD,WAHoB;IAIpBL,SAAS,EAAE,IAAIT,SAAJ,CAAce,IAAd,EAAoBD,WAApB,CAJS;IAKpBY,iBAAiB,EAAE,IAAI1B,SAAJ,CAAcC,gBAAgB,CAACc,IAAD,EAAO,CAAP,CAA9B,EAAyCD,WAAzC;EALC,CAAtB;EAQA,QAAQmB,QAAR;IACE,KAAK/B,qBAAqB,CAACE,SAA3B;MAAsC;QACpC,OAAOS,iBAAiB,CAACC,WAAD,EAAcC,IAAd,CAAjB,IAAwCmB,aAA/C;MACD;IACD,KAAKhC,qBAAqB,CAACC,UAA3B;MAAuC;QACrC,MAAM;UAAEyB;QAAF,IAAed,WAArB;QACA,OACEa,kBAAkB,CAChBb,WADgB,EAEhBC,IAFgB,EAGhBa,QAAQ,GAAGV,IAAI,CAACY,IAAL,CAAUF,QAAV,IAAsBtB,uBAHjB,CAAlB,IAIK4B,aALP;MAOD;IACD;MAAS;QACP,OAAOA,aAAP;MACD;EAhBH;AAkBD,CA/BM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}